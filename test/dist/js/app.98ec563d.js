(function(e){function t(t){for(var r,o,s=t[0],c=t[1],l=t[2],f=0,d=[];f<s.length;f++)o=s[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1:function(e,t){},"387e":function(e,t,n){e.exports=n.p+"img/github.b01932a3.svg"},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),i=n.n(r);i.a},"9c0c":function(e,t,n){},c3ba:function(e,t,n){"use strict";var r=n("dfb8"),i=n.n(r);i.a},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"h-100 w-100"},[r("div",{staticClass:"navbar"},[r("span",{staticClass:"mr-3"},[e._v("Press F to enter fullscreen")]),r("div",{staticClass:"ml-auto"},[r("b-button",{staticClass:"mr-3",attrs:{disabled:!e.dirTree,variant:"light"},on:{click:function(t){e.isChooseFile=!0}}},[e._v("Choose file")]),r("b-button",{staticClass:"mr-3",attrs:{variant:"light"},on:{click:function(t){e.showPreview=!e.showPreview}}},[e._v(e._s(e.showPreview?"Hide Preview":"Show Preview"))]),r("b-button",{staticClass:"mr-3",attrs:{variant:"light",disabled:!e.canSave},on:{click:e.saveMarkdown}},[e._v("Save")]),r("b-link",{attrs:{href:"https://github.com/patarapolw/reveal-md"}},[r("img",{attrs:{src:n("387e")}})])],1)]),r("div",{staticClass:"editor",class:e.showPreview?"w-50":"w-100"},[r("codemirror",{ref:"cm",staticClass:"codemirror",attrs:{options:e.cmOptions},on:{input:e.onCmCodeChange},model:{value:e.raw,callback:function(t){e.raw=t},expression:"raw"}})],1),r("iframe",{ref:"iframe",class:e.showPreview?"w-50":"hidden",attrs:{src:e.iframeUrl,frameborder:"0"}}),e.dirTree?r("b-modal",{attrs:{title:e.dirTree.path,scrollable:"",static:""},model:{value:e.isChooseFile,callback:function(t){e.isChooseFile=t},expression:"isChooseFile"}},[r("treeview",{attrs:{items:e.dirTree.children},on:{filename:function(t){e.filename=t}}})],1):e._e()],1)},a=[],o=(n("a623"),n("d81d"),n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("1276"),n("2ca0"),n("ddb0"),n("2b3d"),n("96cf"),n("d4ec")),s=n("bee2"),c=n("99de"),l=n("7e84"),u=n("262e"),f=n("9ab4"),d=n("60a3"),h=n("85be"),m=n.n(h),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"treeview"},e._l(e.items,(function(t,r){return n("li",{key:r},[n("span",{staticClass:"treeview-header"},[t.children?n("span",{on:{click:function(t){return e.openItem(r)}}},[e.isOpen[r.toString()]?n("fontawesome",{attrs:{icon:"caret-down"}}):n("fontawesome",{attrs:{icon:"caret-right"}})],1):e._e()]),n("span",{staticClass:"treeview-body",class:"ext-"+t.extension,on:{click:function(n){return e.onItemClicked(t,r)}}},[e._v(e._s(t.name))]),t.children&&e.isOpen[r.toString()]?n("treeview",{attrs:{items:t.children},on:{filename:function(t){e.filename=t}}}):e._e()],1)})),0)},v=[],b=(n("0d03"),n("25f0"),function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.isOpen={},e.filename="",e}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"openItem",value:function(e){this.$set(this.isOpen,e.toString(),!this.isOpen[e.toString()])}},{key:"onItemClicked",value:function(e,t){"directory"===e.type?this.openItem(t):"md"===e.extension&&(this.filename=e.relativePath)}},{key:"emitFilename",value:function(){return this.filename}}]),t}(d["d"]));f["a"]([Object(d["c"])()],b.prototype,"items",void 0),f["a"]([Object(d["e"])("filename"),Object(d["b"])("filename")],b.prototype,"emitFilename",null),b=f["a"]([Object(d["a"])({name:"treeview"})],b);var w=b,g=w,y=(n("c3ba"),n("2877")),C=Object(y["a"])(g,p,v,!1,null,null,null),O=C.exports,k=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.cmOptions={mode:{name:"yaml-frontmatter",base:"markdown"}},e.raw="",e.markdown="",e.line=0,e.offset=0,e.showPreview=!0,e.headers={},e.title="",e.isChooseFile=!1,e.filename="",e.dirTree=null,e.canSave=!1,e}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"onIFrameReady",value:function(e){var t=this,n=function(){t.iframeWindow.revealMd.onReady((function(){e()}))};this.iframe&&this.iframe.contentDocument&&(this.iframeWindow.revealMd?n():setTimeout((function(){t.onIFrameReady(e)}),1e3))}},{key:"created",value:function(){var e,t;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(e=new URL(location.href).searchParams.get("q"),!e){n.next=7;break}return n.next=4,regeneratorRuntime.awrap(fetch(e).then((function(e){return e.text()})));case 4:this.raw=n.sent,n.next=17;break;case 7:return n.prev=7,n.next=10,regeneratorRuntime.awrap(fetch("/api/").then((function(e){return e.json()})));case 10:t=n.sent,t.filename?this.openFile(t.filename):t.dirTree?(this.dirTree=t.dirTree,this.isChooseFile=!0):this.raw=Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_PLACEHOLDER||"",n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](7),this.raw=Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_PLACEHOLDER||"";case 17:case"end":return n.stop()}}),null,this,[[7,14]])}},{key:"mounted",value:function(){var e=this;this.codemirror.addKeyMap({"Cmd-P":function(){e.showPreview=!e.showPreview},"Ctrl-P":function(){e.showPreview=!e.showPreview},"Cmd-S":function(){e.saveMarkdown()},"Ctrl-S":function(){e.saveMarkdown()}}),this.codemirror.on("cursorActivity",(function(t){e.line=t.getCursor().line-e.offset})),this.onCmCodeChange()}},{key:"openFile",value:function(e){var t=this;this.isChooseFile=!1,this.filename=e,document.getElementsByTagName("title")[0].innerText=e.split("/").pop();var n=new URL("/api/data",location.origin);n.searchParams.set("filename",e),fetch(n.href).then((function(e){return e.text()})).then((function(e){t.raw=e})).catch((function(e){return console.error(e)}))}},{key:"onCmCodeChange",value:function(){var e=this;try{var t=m()(this.raw);d["d"].set(this,"headers",t.data),this.markdown=t.content,this.offset=this.raw.replace(t.content,"").split("\n").length-1}catch(r){this.markdown=this.raw,this.offset=0}this.title=this.headers.title||"";var n=document.getElementsByTagName("title")[0];this.title&&n&&(n.innerText="Editing: ".concat(this.title)),this.filename&&this.raw&&(this.canSave=!0),this.onIFrameReady((function(){e.iframeWindow.revealMd.update(e.raw)}))}},{key:"onCursorMove",value:function(){var e=this;if(!(this.line<0)){var t=0,n=0,r=0,i=!1,a=0;this.markdown.split(/\n===\n/g).map((function(o,s){var c=o.split(/\n--\n/g),l=c.map((function(e){return e.startsWith("// hidden\n")||e.startsWith("// global\n")}));l.every((function(e){return e}))&&a++,r<=e.line&&(t=s-a,i=l.every((function(e){return e})));var u=0;c.map((function(t,a){l[a]&&u++,r<=e.line&&(n=a-u,i=l[a]),r+=t.split("\n").length+1}))})),!i&&t>=0&&this.iframeWindow.Reveal.slide(t,n)}}},{key:"saveMarkdown",value:function(){var e=this;this.filename&&fetch("/api/data",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:this.filename,content:this.raw})}).then((function(t){201===t.status?e.canSave=!1:e.$bvModal.msgBoxOk("Cannot save: ".concat(t.statusText))}))}},{key:"codemirror",get:function(){return this.$refs.cm.codemirror}},{key:"iframe",get:function(){return this.$refs.iframe}},{key:"iframeWindow",get:function(){return this.iframe.contentWindow}},{key:"iframeUrl",get:function(){var e="".concat("","/reveal/");if(this.filename){var t=new URL(e,location.origin);return t.searchParams.set("filename",this.filename),t.href}return e}}]),t}(d["d"]);f["a"]([Object(d["e"])("filename")],k.prototype,"openFile",null),f["a"]([Object(d["e"])("line")],k.prototype,"onCursorMove",null),k=f["a"]([Object(d["a"])({components:{Treeview:O}})],k);var P=k,j=P,_=(n("5c0b"),Object(y["a"])(j,i,a,!1,null,null,null)),x=_.exports,S=n("5f5b");n("ab8b"),n("2dd8");r["default"].use(S["a"]);n("a15b");var T=n("8f94"),E=n.n(T);n("a7be"),n("959b"),n("ced0"),n("d202"),n("5bef"),n("7b00"),n("f9d4"),n("10b2"),n("7289"),n("4895"),n("cbc8"),n("aedd"),n("8d70"),n("164b"),n("9f09"),n("697e"),n("d2d5"),n("7a7a");r["default"].use(E.a,{options:{theme:"monokai",lineNumbers:!0,autoCloseBrackets:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],lineWrapping:!0,tabSize:2,extraKeys:{"Cmd-/":"toggleComment","Ctrl-/":"toggleComment",Tab:function(e){var t=Array(e.getOption("indentUnit")+1).join(" ");e.getDoc().replaceSelection(t)}},foldGutter:!0,scrollPastEnd:!0}});var M=n("ecee"),F=n("c074"),R=n("ad3d");M["c"].add(F["a"],F["b"]),r["default"].component("fontawesome",R["a"]),r["default"].config.productionTip=!1,new r["default"]({render:function(e){return e(x)}}).$mount("#app")},dfb8:function(e,t,n){}});
//# sourceMappingURL=app.98ec563d.js.map